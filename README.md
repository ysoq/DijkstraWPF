# 地图导航系统 - Dijkstra最短路径算法

## 项目简介

这是一个基于Dijkstra算法的地图导航系统，使用WPF技术实现可视化界面，能够帮助用户在地图上查找最短路径。系统支持交互式操作，用户可以通过点击地图选择起点和终点，系统会自动计算并显示最短路径。

## 功能说明

### 核心功能

1. **地图可视化**：以图形化方式展示地图线路和节点
2. **交互式路径规划**：用户可以通过鼠标点击选择起点和终点
3. **最短路径计算**：使用Dijkstra算法计算两点之间的最短路径
4. **临时点优化**：支持添加临时点来优化路径计算
5. **路径可视化**：以红色虚线方式高亮显示计算出的最短路径

### 操作功能

- **清除**：清除当前选择的起点、终点和计算出的路径
- **重置**：重置整个地图，恢复初始状态
- **添加临时点**：在地图上添加临时点，优化路径计算
- **查找最短路径**：根据选择的起点和终点计算并显示最短路径

## 使用方法

1. **启动应用**：运行`DijkstraWPF.exe`可执行文件
2. **选择起点**：在地图上点击任意位置，选择路径的起点（显示为绿色圆点）
3. **选择终点**：再次在地图上点击任意位置，选择路径的终点（显示为红色圆点）
4. **计算路径**：点击"查找最短路径"按钮，系统会自动计算并显示最短路径（红色虚线）
5. **优化路径**：点击"添加临时点"按钮，可以在地图上添加临时点来优化路径
6. **重新开始**：点击"清除"按钮清除当前选择，或点击"重置"按钮恢复初始状态

## 项目结构

```
DijkstraWPF/
├── DijkstraWPF/
│   ├── App.xaml                 # 应用程序入口
│   ├── App.xaml.cs              # 应用程序逻辑
│   ├── DijkstraWPF.csproj       # 项目配置文件
│   ├── LineSegmentProcessor.cs  # 线段处理和图构建逻辑
│   ├── MainWindow.xaml          # 主窗口界面
│   └── MainWindow.xaml.cs       # 主窗口逻辑
├── DijkstraWPF.sln              # 解决方案文件
└── README.md                    # 项目说明文档
```

## 技术栈

- **开发框架**：WPF (.NET 6)
- **编程语言**：C#
- **算法库**：Dijkstra.NET
- **UI设计**：XAML

## 构建和运行

### 环境要求

- .NET 6 SDK
- Visual Studio 2022 或更高版本

### 构建项目

1. 打开`DijkstraWPF.sln`解决方案
2. 在Visual Studio中选择"生成" -> "生成解决方案"
3. 或使用命令行：`dotnet build`

### 运行项目

1. 在Visual Studio中点击"启动"
2. 或使用命令行：`dotnet run --project DijkstraWPF/DijkstraWPF.csproj`
3. 或直接运行生成的`DijkstraWPF.exe`文件

## 算法说明

### Dijkstra最短路径算法

Dijkstra算法是一种用于寻找加权图中两点之间最短路径的算法。该算法的基本思想是：

1. 初始化所有节点的距离为无穷大，起点距离为0
2. 选择距离最小的未访问节点
3. 对于该节点的所有邻居，计算通过该节点到达邻居的距离
4. 如果计算出的距离小于邻居当前的距离，则更新邻居的距离
5. 标记该节点为已访问
6. 重复步骤2-5，直到到达终点或所有节点都被访问

### 地图数据处理

1. 系统将地图线路表示为线段集合
2. 处理线段交点，将线段分割为更小的线段
3. 将分割后的线段转换为图结构，线段的端点作为图的节点
4. 线段的长度作为图中边的权重
5. 使用Dijkstra算法在图中查找最短路径

## 界面设计

### 布局结构

1. **标题栏**：显示应用程序名称和算法说明
2. **控制面板**：包含各种操作按钮和状态提示
3. **地图画布**：显示地图线路和路径
4. **操作说明**：底部显示简单的操作指南


## 注意事项

1. 应用程序使用示例地图数据，实际使用时可以根据需要修改`LineSegmentProcessor.cs`中的地图数据
2. 地图坐标系统基于画布坐标，左上角为原点
3. 系统支持的最大地图大小为窗口大小，超出部分可能无法显示
4. 路径计算结果可能会受到地图数据精度的影响


## 许可证

本项目采用MIT许可证，可自由使用和修改。
